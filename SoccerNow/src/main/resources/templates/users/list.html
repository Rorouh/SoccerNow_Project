<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments/header :: head('Lista de Usuarios')"></head>
  <body th:replace="fragments/header :: content">
    <section>
      <h2>Gestión de Usuarios</h2>
      <a th:href="@{/web/users/create}">Crear Nuevo Usuario</a>

      <div th:if="${error}" style="color:red; margin-top:10px;">
        <p th:text="${error}"></p>
      </div>

      <table border="1" cellpadding="5" cellspacing="0"
             style="width:100%; margin-top:15px;">
        <thead>
          <tr style="background:#ddd;">
            <th>ID</th>
            <th>Nombre</th>
            <th>Email</th>
            <th>Rol</th>
            <th>Posición / Certificado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="u : ${users}">
            <td th:text="${u.id}"></td>
            <td th:text="${u.name}"></td>
            <td th:text="${u.email}"></td>
            <td th:text="${u.role}"></td>
            <td>
              <span th:if="${u.role == 'PLAYER'}" th:text="${u.preferredPosition}"></span>
              <span th:if="${u.role == 'REFEREE'}" th:text="${u.certified} ? 'Sí' : 'No'"></span>
            </td>
            <td>
              <a th:href="@{/web/users/edit/{id}(id=${u.id})}">Editar</a> |
              <a th:href="@{/web/users/delete/{id}(id=${u.id})}"
                 th:onclick="|return confirm('¿Eliminar usuario ID ' + ${u.id} + '?');|">
                Eliminar
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
    <div th:replace="fragments/footer :: footer"></div>
  </body>
</html>
