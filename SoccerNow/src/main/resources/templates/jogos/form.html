<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments/header :: head(
      ${jogoDTO.id} != null 
        ? 'Editar Juego ' + ${jogoDTO.id} 
        : 'Crear Nuevo Juego')">
  </head>
  <body th:replace="fragments/header :: content">
    <section>
      <h2 th:text="${jogoDTO.id} != null 
                      ? 'Editar Juego ' + ${jogoDTO.id} 
                      : 'Crear Nuevo Juego'"></h2>

      <div th:if="${error}" style="color:red; margin-bottom:1em;">
        <p th:text="${error}"></p>
      </div>

      <form th:action="${jogoDTO.id} != null
                        ? @{/web/jogos/update/{id}(id=${jogoDTO.id})}
                        : @{/web/jogos/save}"
            th:object="${jogoDTO}" method="post">

        <div>
          <label for="dateTime">Fecha y Hora:</label>
          <input type="datetime-local" id="dateTime" th:field="*{dateTime}" required/>
        </div>

        <div>
          <label for="location">Localización:</label>
          <input type="text" id="location" th:field="*{location}" required/>
        </div>

        <div>
          <label>
            <input type="checkbox" th:field="*{amigavel}" /> Amistoso
          </label>
        </div>

        <div>
          <label for="homeTeamId">Equipo Local:</label>
          <select id="homeTeamId" th:field="*{homeTeamId}" required>
            <option value="" disabled>--Seleccionar--</option>
            <option th:each="t : ${teams}"
                    th:value="${t.id}"
                    th:text="${t.name}"></option>
          </select>
        </div>

        <div>
          <label for="awayTeamId">Equipo Visitante:</label>
          <select id="awayTeamId" th:field="*{awayTeamId}" required>
            <option value="" disabled>--Seleccionar--</option>
            <option th:each="t : ${teams}"
                    th:value="${t.id}"
                    th:text="${t.name}"></option>
          </select>
        </div>

        <div style="margin-top:1em;">
          <label>Árbitros:</label>
          <div>
            <div th:each="arb : ${arbitros}">
              <input type="checkbox"
                     th:id="'arb-' + ${arb.id}"
                     th:name="arbitroIds"
                     th:value="${arb.id}"
                     th:checked="${jogoDTO.arbitroIds != null} 
                                  ? ${jogoDTO.arbitroIds.contains(arb.id)} 
                                  : false"/>
              <label th:for="'arb-' + ${arb.id}"
                     th:text="${arb.name} + ' (ID: ' + ${arb.id} + ')'"></label>
            </div>
          </div>
        </div>

        <div style="margin-top:1em;">
          <label for="primaryRefereeId">Árbitro Principal:</label>
          <select id="primaryRefereeId" th:field="*{primaryRefereeId}">
            <option value="" th:text="'--Ninguno--'"></option>
            <option th:each="arb : ${arbitros}"
                    th:value="${arb.id}"
                    th:text="${arb.name}"></option>
          </select>
        </div>

        <div style="margin-top:1.5em;">
          <button type="submit" 
                  th:text="${jogoDTO.id} != null ? 'Actualizar' : 'Crear'"></button>
          <a th:href="@{/web/jogos}" style="margin-left:1em;">Cancelar</a>
        </div>
      </form>
    </section>
    <div th:replace="fragments/footer :: footer"></div>
  </body>
</html>
