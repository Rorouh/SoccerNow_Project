<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments/header :: head(
      ${playerDTO.id} != null 
        ? 'Editar Jugador ' + ${playerDTO.id} 
        : 'Crear Nuevo Jugador')">
  </head>
  <body th:replace="fragments/header :: content">
    <section>
      <h2 th:text="${playerDTO.id} != null 
                      ? 'Editar Jugador ' + ${playerDTO.id} 
                      : 'Crear Nuevo Jugador'"></h2>

      <div th:if="${error}" style="color:red; margin-bottom:1em;">
        <p th:text="${error}"></p>
      </div>

      <form th:action="${playerDTO.id} != null
                        ? @{/web/players/update/{id}(id=${playerDTO.id})}
                        : @{/web/players/save}"
            th:object="${playerDTO}" method="post">

        <div>
          <label for="name">Nombre:</label>
          <input type="text" id="name" th:field="*{name}" required/>
          <p th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></p>
        </div>

        <div>
          <label for="email">Email:</label>
          <input type="email" id="email" th:field="*{email}" required/>
          <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
        </div>

        <div>
          <label for="password">Contraseña:</label>
          <input type="password" id="password" th:field="*{password}"
                 th:placeholder="${playerDTO.id == null ? '' : '••••••'}"
                 th:attr="required=${playerDTO.id == null}" />
        </div>

        <div>
          <label for="preferredPosition">Posición Preferida:</label>
          <select id="preferredPosition" th:field="*{preferredPosition}" required>
            <option value="" disabled>--Seleccionar--</option>
            <option th:each="pos : ${positions}"
                    th:value="${pos}"
                    th:text="${pos}"></option>
          </select>
          <p th:if="${#fields.hasErrors('preferredPosition')}"
             th:errors="*{preferredPosition}"></p>
        </div>

        <div style="margin-top:1em;">
          <label for="goals">Goles:</label>
          <input type="number" id="goals" th:field="*{goals}" min="0"/>
        </div>

        <div>
          <label for="cards">Tarjetas:</label>
          <input type="number" id="cards" th:field="*{cards}" min="0"/>
        </div>

        <div style="margin-top:1.5em;">
          <button type="submit" 
                  th:text="${playerDTO.id} != null ? 'Actualizar' : 'Crear'"></button>
          <a th:href="@{/web/players}" style="margin-left:1em;">Cancelar</a>
        </div>
      </form>
    </section>
    <div th:replace="fragments/footer :: footer"></div>
  </body>
</html>
