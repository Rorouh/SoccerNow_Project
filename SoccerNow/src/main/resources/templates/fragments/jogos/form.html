<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: head(~{::body})">
    <title th:text="${jogoDTO.id != null} ? 'Editar Jogo' : 'Criar Jogo'"></title>
</head>
<body>
<div th:replace="fragments/header :: content"></div>

<h2 th:text="${jogoDTO.id != null} ? 'Editar Jogo' : 'Criar Novo Jogo'"></h2>

<div th:if="${error}" style="color:red; margin-bottom: 1em;">
    <p th:text="${error}"></p>
</div>

<form th:action="@{${jogoDTO.id != null} ? '/web/jogos/update/' + ${jogoDTO.id} : '/web/jogos/save'}"
      th:object="${jogoDTO}" method="post">

    <div>
        <label for="dateTime">Data e Hora:</label>
        <input type="datetime-local" id="dateTime" th:field="*{dateTime}" required/>
    </div>

    <div>
        <label for="location">Local:</label>
        <input type="text" id="location" th:field="*{location}" required/>
    </div>

    <div>
        <label for="amigavel">Amigável:</label>
        <input type="checkbox" id="amigavel" th:field="*{amigavel}"/>
    </div>

    <div>
        <label for="homeTeamId">Time Casa:</label>
        <select id="homeTeamId" th:field="*{homeTeamId}" required>
            <option th:each="team : ${allTeams}" th:value="${team.id}" th:text="${team.name}"></option>
        </select>
    </div>

    <div>
        <label for="awayTeamId">Time Fora:</label>
        <select id="awayTeamId" th:field="*{awayTeamId}" required>
            <option th:each="team : ${allTeams}" th:value="${team.id}" th:text="${team.name}"></option>
        </select>
    </div>

    <div>
        <label for="primaryRefereeId">Árbitro Principal:</label>
        <select id="primaryRefereeId" th:field="*{primaryRefereeId}" required>
            <option th:each="ref : ${allReferees}" th:value="${ref.id}" th:text="${ref.name}"></option>
        </select>
    </div>

    <div>
        <label>Árbitros:</label>
        <div th:each="ref : ${allReferees}">
            <input type="checkbox" th:id="'ref-' + ${ref.id}"
                   th:name="arbitroIds"
                   th:value="${ref.id}"
                   th:checked="${jogoDTO.arbitroIds != null} ? ${jogoDTO.arbitroIds.contains(ref.id)} : false"/>
            <label th:for="'ref-' + ${ref.id}" th:text="${ref.name}"></label>
        </div>
    </div>

    <div style="margin-top: 1em;">
        <button type="submit" th:text="${jogoDTO.id != null} ? 'Atualizar' : 'Criar'"></button>
        <a th:href="@{/web/jogos}" style="margin-left: 1em;">Cancelar</a>
    </div>

</form>

<div th:replace="fragments/footer :: footer"></div>
</body>
</html>
